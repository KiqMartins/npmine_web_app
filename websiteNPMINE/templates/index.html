{% extends "layout.html" %}
<body>
    {% block about %}
    <a class="nav-link active" aria-current="page" href="#about">
        <button type="button" class="btn btn-dark">About</button>
    </a>
    {% endblock about %}

{% block bannercontent %}
<!-- Banner -->
<div class="container">
  <div class="jumbotron p-3 py-3 pt-md-5 pb-md-4 mx-auto text-center text-white rounded bg-dark npmine-banner">
    <h1 class="search display-4 font-italic">Search</h1>
    <p class="search" style="font-size: 25px;">Explore chemical and taxonomic entities extracted by NPMINE</p>
    <form id="search-form" class="form-inline justify-content-center mt-4 search-form" action="/search" method="GET">
      <div class="input-group">
        <input type="text" class="form-control search-input" id="search-input" name="q" placeholder="Search">
        <button type="submit" class="btn btn-primary submit-btn">Submit</button>
      </div>
    </form>
  </div>
</div>
<script>
  $(document).ready(function() {
    $('#search-form').submit(function(e) {
      e.preventDefault();
      var searchQuery = $('#search-input').val();
      window.location.href = '/api/data?search=' + encodeURIComponent(searchQuery);
    });
  });
</script>
<div class="container">
    <hr>
    <div id="table"></div>
  </div>
  <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
  <script>
    const updateUrl = (prev, query) => {
      return prev + (prev.indexOf('?') >= 0 ? '&' : '?') + new URLSearchParams(query).toString();
    };

    new gridjs.Grid({
  columns: [
    {
      id: 'id',
      name: 'ID',
      sort: false, 
      formatter: (cell, row) => {
        return gridjs.html('<a href="/compound/' + cell + '">' + cell + '</a>');
      }
    },
    { id: 'inchikey', name: 'InChI Key', sort: false },
    {
      id: 'pubchem',
      name: 'PubChem ID',
      sort: false,
      formatter: (cell, row) => {
        return gridjs.html('<a href="https://pubchem.ncbi.nlm.nih.gov/compound/' + cell + '">' + cell + '</a>');
      }
    },
  ],
      server: {
        url: '/api/data',
        then: results => results.data,
        total: results => results.total,
      },
      sort: {
        enabled: true,
        multiColumn: true,
        server: {
          url: (prev, columns) => {
            const columnIds = ['id','inchikey', 'pubchem'];
            const sort = columns.map(col => (col.direction === 1 ? '+' : '-') + columnIds[col.index]);
            return updateUrl(prev, {sort});
          },
        },
      },
      pagination: {
        enabled: true,
        server: {
          url: (prev, page, limit) => {
            return updateUrl(prev, {start: page * limit, length: limit});
          },
        },
      },
    }).render(document.getElementById('table'));
  </script>
<br>
<section class="page-section" id="about">
    <div class="container">
        <h2 class="page-section-heading text-center text-uppercase mb-0" style="color: #000000"><b>About NPMINE</b></h2>
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-atom"></i></div>
            <div class="divider-custom-line"></div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4 mb-5">
              <img class="img-fluid" src="/static/assets/img/npmine_report_terminal.png" alt="..." />
            </div>
            <div class="col-md-6 col-lg-8 mb-5">
              <br>
              <br>
              <p style="font-family: 'Quicksand', sans-serif; font-size: 20px; text-align: center;">NPMINE (Natural Products MINing) is an open-source modular tool that utilizes text mining techniques to extract chemical entities, which may include natural products (NPs), and taxonomic mentions from scientific literature. This online database serves the purpose of storing information that have been extracted by NPMINE, thereby enabling searches and analyses.</p>
            </div>
        </div>
    </div>
</section>
<br>
<footer class="footer text-center" style="background-color: #000000">
    <div class="container" style="color: #ffffff">
        <br>
        <div class="row">
          <div>
            <p class="lead mb-0" style="text-align: justify; font-size: 15px">
             <a href="https://github.com/computational-chemical-biology/npmine">NPMINE</a> and <a href="https://github.com/computational-chemical-biology/npmine_web_app">NPMINE Online Database</a> is a freely accessible and community-driven digital platform. Users are invited to report bugs, make feature requests, and communicate general issues via the <a href="https://github.com/computational-chemical-biology/npmine_web_app/issues">issues tracker on GitHub.</a> The development and maintenance of NPMINE and NPMINE Online Database are overseen by the <a href="http://ccbl.fcfrp.usp.br/ccbl/index.html">Computational Chemical Biology group</a>, based at the <a href="https://fcfrp.usp.br/en/">School of Pharmaceutical Sciences</a> in Ribeir√£o Preto - SP, Brazil.
            </p>
          </div>
            <div>
                <a class="btn btn-social mx-1" href="https://github.com/computational-chemical-biology/npmine"><img src="static/assets/img/github.webp" width="30"><!--<i class="fas fa-download"></i>--></a>
            </div> 
        </div>
        <br>
    </div>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.js"></script>
    <script>
      $(document).ready(function(){
          $('#myTable').dataTable();
      });
    </script>
</footer>
{% endblock bannercontent %}